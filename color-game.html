<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AtiToolz â€¢ Color Game</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='0.9em' font-size='90'%3EðŸŽ¨%3C/text%3E%3C/svg%3E" />
    <link rel="stylesheet" href="styles.css" />
    <style>
      main { max-width: none; width: 100vw; padding: clamp(0.5rem, 2vh, 2rem); padding-block-end: 4rem; }
      .game {
        display: grid;
        grid-template-rows: 1fr auto;
        gap: clamp(0.5rem, 2vh, 1rem);
        place-items: center;
        min-height: 85vh;
      }
      #circle {
        width: min(80vw, 600px);
        aspect-ratio: 1 / 1;
        border-radius: 50%;
        background: gray;
        box-shadow: 0 12px 36px color-mix(in oklab, var(--fg) 18%, transparent);
        border: 10px solid color-mix(in oklab, var(--fg) 35%, transparent);
        cursor: pointer;
        user-select: none;
        -webkit-user-drag: none;
      }
      #nextBtn {
        font-size: clamp(1.25rem, 3.5vw, 2rem);
        padding: clamp(0.75rem, 2.8vh, 1.25rem) clamp(1.5rem, 6vw, 2.5rem);
        border: none;
        border-radius: 0.75rem;
        background: color-mix(in oklab, var(--accent) 70%, transparent);
        color: white;
        box-shadow: 0 6px 18px color-mix(in oklab, var(--accent) 40%, transparent);
        cursor: pointer;
        width: min(90vw, 420px);
      }
      #nextBtn:active { transform: translateY(1px); }
      .topbar { text-align: center; margin-block-end: 0.5rem; color: var(--muted); }
      .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }
      #backBtn {
        position: fixed;
        inset-block-start: 0.75rem;
        inset-inline-start: 0.75rem;
        z-index: 1000;
        text-decoration: none;
        font-weight: 700;
        font-size: clamp(1rem, 2.5vw, 1.25rem);
        padding: 0.5rem 0.9rem;
        border-radius: 0.6rem;
        background: color-mix(in oklab, var(--fg) 12%, transparent);
        color: var(--fg);
        box-shadow: 0 4px 14px color-mix(in oklab, var(--fg) 18%, transparent);
      }
    </style>
  </head>
  <body>
    <a id="backBtn" href="index.html" aria-label="Back to home">â¬… BACK</a>
    <main>
      <h1>Color Game</h1>
      <p class="topbar">Tap the circle to hear the color. Tap Next for another.</p>
      <section class="game" aria-live="polite">
        <div id="circle" role="button" aria-label="Color circle"></div>
        <button id="nextBtn" type="button" aria-label="Show next color">Next â–¶</button>
        <span id="colorName" class="sr-only" aria-hidden="true"></span>
      </section>
    </main>
    <footer>
      <small>AtiToolz â€¢ English practice â€¢ <span id="year"></span></small>
    </footer>

    <script>
      document.getElementById('year').textContent = new Date().getFullYear();

      // Simple color set for practice
      const COLORS = [
        { name: 'red', css: 'red' },
        { name: 'orange', css: 'orange' },
        { name: 'yellow', css: 'yellow' },
        { name: 'green', css: 'green' },
        { name: 'blue', css: 'blue' },
        { name: 'purple', css: 'purple' },
        { name: 'pink', css: 'pink' },
        { name: 'brown', css: 'brown' },
        { name: 'black', css: 'black' },
        { name: 'white', css: 'white' },
        { name: 'gray', css: 'gray' },
      ];

      const circle = document.getElementById('circle');
      const nextBtn = document.getElementById('nextBtn');
      const colorNameEl = document.getElementById('colorName');
      let currentIndex = -1;

      function pickNextIndex() {
        if (COLORS.length <= 1) return 0;
        let i;
        do { i = Math.floor(Math.random() * COLORS.length); } while (i === currentIndex);
        return i;
      }

      function show(index) {
        currentIndex = index;
        const { name, css } = COLORS[index];
        colorNameEl.textContent = name;
        circle.style.background = css;
        circle.setAttribute('aria-label', `${name} color circle`);
      }

      function next() { show(pickNextIndex()); }

      function speak(text) {
        try {
          if (!('speechSynthesis' in window)) return;
          window.speechSynthesis.cancel();
          const utter = new SpeechSynthesisUtterance(text);
          const voices = speechSynthesis.getVoices();
          const en = voices.find(v => v.lang && v.lang.toLowerCase().startsWith('en'));
          if (en) utter.voice = en;
          utter.rate = 0.95;
          utter.pitch = 1.0;
          speechSynthesis.speak(utter);
        } catch (_) {}
      }

      circle.addEventListener('click', () => {
        if (!colorNameEl.textContent) return;
        speak(colorNameEl.textContent);
      });
      nextBtn.addEventListener('click', next);

      // Keyboard: Space -> speak, Enter -> next
      window.addEventListener('keydown', (e) => {
        const key = e.code || e.key;
        if (key === 'Enter' || e.key === 'Enter') {
          e.preventDefault();
          next();
          return;
        }
        const isSpace = key === 'Space' || e.key === ' ' || e.key === 'Spacebar';
        if (isSpace) {
          e.preventDefault();
          if (!colorNameEl.textContent) return;
          speak(colorNameEl.textContent);
        }
      });

      // First color
      next();
    </script>
  </body>
  </html>
